---
title: "Introduction to Data Day 3"
date: "April 8, 2024"
output:
  xaringan::moon_reader:
    css: "myCSS.css"
    self_contained: true
    chakra: "remark-latest.min.js"
    nature:
      countIncrementalSlides: false
---



### Summary of Two Categorical Variables

--

The **contingency table** summarizes the frequency distribution of TWO categorical variables typically.

--

A group of 121 doctors and nurses volunteered to run a health fair. Each volunteer worked one shift. The table below summarizes the data on the volunteers and their shifts

. | Morning | Afternoon | Evening
----|----|----|----
Doctor | 22 | 27 | 13
Nurse | 16 | 36 | 7


--

Suppose a volunteer from the health fair is chosen at random. What is the probability that the volunteer is a doctor or worked the evening shift?

---

### The Marginal Table

--

The marginal table is a contingency table with the total columns and rows.

--

. | Morning | Afternoon | Evening | Total
----|----|----|----|----
Doctor | 22 | 27 | 13 | 62
Nurse | 16 | 36 | 7 | 59
Total | 38 | 63 | 20 | 121

--

The marginal table is necessary to compute probabilities.

--

What is the probability that the volunteer is a doctor or worked the evening shift?

--

- Consider the events: D = Volunteer is a doctor, E = Volunteer works in the evening.

--

- Using set notation: What is $P(D \cup E)$?

---

According to the probability rules: 

--

- $P(D \cup E) = P(D) + P(E) - P(D \cap E)$

--

. | Morning | Afternoon | Evening | Total
----|----|----|----|----
Doctor | 22 | 27 | 13 | 62
Nurse | 16 | 36 | 7 | 59
Total | 38 | 63 | 20 | 121

--

- P(D) = 62/121, P(E) = 20/121, $P(D \cap E)$ = 13/121

--

- $P(D \cup E)$ = 62/121 + 20/121 - 13/121

--

- $P(D \cup E)$ = 69/121

--

What is the probability that the volunteer worked the morning shift, given that the volunteer is a nurse?

---

What is the probability that the volunteer worked the morning shift, **given that the volunteer is a nurse**?

--

. | Morning | Afternoon | Evening | Total
----|----|----|----|----
Doctor | 22 | 27 | 13 | 62
**Nurse** | 16 | 36 | 7 | **59**
Total | 38 | 63 | 20 | 121

--

- Consider the following events: N = Volunteer is a nurse, and M = Volunteer works in the morning.

--

- Using set notation: What is P(M | N)?

--

This is an example of *conditional* probability. The condition is the information known prior the computation of the probability.


---

On the marginal table, consider the condition:

. | Morning | Afternoon | Evening | Total
----|----|----|----|----
Doctor | . | . | . | .
**Nurse** | 16 | 36 | 7 | **59**
Total | . | . | . | .

--

Compute the probability:

--

- 16/59



---

### The Contingency Table in R

--

The function **table()** displays the contingency table between two categorical variables. The first will be displayed on the rows and the second on the columns.

--

For example, using the **mtcars** data frame, make a contingency table that summarizes number of cylinders and engine type.

--

```{r comment=NA, eval=FALSE}

table(mtcars$cyl, mtcars$vs)

```

--

```{r comment=NA, echo=FALSE}

table(mtcars$cyl, mtcars$vs)

```

--

- The variables "cyl" and "vs" have numeric values. The function **table( )** does not understand the definition of them.

--

- For this reason, we can use **table( )** to summarize the distribution of two finite discrete variables. *(DD3 topic)*

---

- According to **mtcars**, the variable **vs** is categorical with the following labels: 0 = V-shaped, 1 = Straight. *(Engine type)*

--

- The variable **cyl** represent the number of cylinders.

--

What is the probability of selecting a 4-cylinder car given that it has a V-shaped engine?

--

- The answer to this question requires the computation of the total marginals in the contingency table.

--

```{r comment=NA}

# STEP 1: Copy the contingency table
mytab <- table(mtcars$cyl, mtcars$vs)

# STEP 2: Display the table with total marginals
addmargins(mytab)

```

---

- The answer is 1/14

--

Using the data frame **airquality** make a contingency table with the variables *Temp* and *Month*, and display the total marginal.

--

```{r comment=NA, eval=FALSE}

# Copy contingency table
mytab <- table(airquality$Temp, airquality$Month)

# Display table with total marginal
addmargins(mytab)

```


--

```{r comment=NA, echo=FALSE}

# Copy the contingency table
mytab <- table(airquality$Temp, airquality$Month)

# Display table with the total marginal
addmargins(mytab)

```

---

### Combining Rows and Columns in a Contingency Table

--

Complete the following table using the previous table output.

Temp (F) | Months<br>5-6 | Months<br>7-8-9
----|----|----
50 - 59 | . | .
60 - 69 | . | .
70 - 79 | . | .
80 - 89 | . | .
90 - 99 | . | .

--

Open Excel and complete this assignment. DO NOT FORGET to include the row and column marginals.

---

Temp (F) | Months<br>5-6 | Months<br>7-8-9 | Row Sum
----|----|----|----
50 - 59 | 8 | 0 | 8
60 - 69 | 18 | 6 | 24
70 - 79 | 22 | 26 | 48
80 - 89 | 10 | 46 | 56
90 - 99 | 3 | 14 | 17
**Col Sum** | 61 | 92 | 153

--


What is the probability that the temperature is less than 70 degrees? *(Write your answer in fraction. Do not simplify)*.

--

- $\frac{32}{153}$

--

Given the sample was taken between July and September, what is the probability that the temperature is less than 70 degrees? *(Write your answer in fraction. Do not simplify)*.

--

- $\frac{6}{92}$


---




---

The following technique is possible because the categories are labeled with numbers.

--

We are going to use the function **cut()** to create new categories *(or cut the variable or making intervals)*.

--

```{r comment=NA}

temp_2 <- cut(airquality$Temp, c(50,60,70,80,90,100))

month_2 <- cut(airquality$Month, c(4,6,9))
              

```

--

- In the function *cut()*, the first argument is the variable to "cut" and the second argument specify the cutting points.

--

- By default, the new intervals are open below and closed above. For example, (50, 60].


---

Make another table using the new classification for temperature *(temp_2)* and month *(month_2)*.

--

```{r comment=NA, eval=FALSE}

table(temp_2, month_2)

```


--

```{r comment=NA, echo=FALSE}

table(temp_2, month_2)

```


--

Make a copy of this second table and add the total marginal.

--

```{r comment=NA, eval=FALSE}

# Make copy of table
mytab_2 <- table(temp_2, month_2)

# Display total marginal
addmargins(mytab_2)

```

---


```{r comment=NA, echo=FALSE}

# Make copy of table
mytab_2 <- table(temp_2, month_2)

# Display total marginal
addmargins(mytab_2)

```


What is the probability that the temperature is at most 70 degrees? *(Write your answer in fraction. Do not simplify)*.

--

- $\frac{33}{153}$

--

Given the sample was taken in Summer, what is the probability that the temperature at most 70 degrees? *(Write your answer in fraction. Do not simplify)*.

--

- $\frac{7}{92}$


---


### Drawing a Random Sample in R

--

The function **sample()** draws a random sample from a specified data set.

--

For example, consider *mpg* in the data frame **mtcars** and you want to draw a random sample for size 10 from it.

--

```{r comment=NA, eval=FALSE}

sample(mtcars$mpg, 10)

```

--

- The first argument is the data set and the second is the required sample size.

--

```{r comment=NA, echo=FALSE, message=FALSE}

library(tidyverse) # We need load data frame diamonds
sample(mtcars$mpg, 10)

```

--

Repeat the same exercise by sampling with size 5

--

```{r comment=NA}

sample(mtcars$mpg, 5)

```

--

Sampling in these exercises were done **without** replacement.



---


### Sampling from a Data Frame

--

In this exercise we are going to use the same function **sample()**.


--

We are going to sample 50 observations from the data frame **airquality**.

--

```{r comment=NA}

# Make a copy of the random sample selection
air_2 <- airquality[ sample(50), ]


```


--

The new copy, *air_2*, has inherited the properties of the original data frame, *airquality*. However, the number of observations, *(rows)*, is 50.

--

Replicate the contingency tables for *Temp* and *Month* and the condensed version with total marginals.

---


### Practice questions


Q1) What is the probability of selecting a car with 6 cylinders?


- 7/32

Q2) What is the probability of selecting a V-shaped engine car?

- 18/32

Q3) What is the probability of selecting a car with 6 cylinders and V-shaped engine?

- 3/32

Q4) What is the probability of selecting a 6-cylinder or V-shaped car?

- Let E: Car is 6-cylinder, F: Car is V-shaped engine

- P(E $\cup$ F) = P(E) + P(F) - P(E $\cap$ F)

- P(E $\cup$ F) = 7/32 + 18/32 - 3/32

- 22/32


Q5) Given that the car has V-shaped engine, what is the probability that the car is 6-cylinder?

- 3/18

Q6) What is the probability of selecting a V-shaped engine car if it has 6 cylinders?

- 3/7


---






